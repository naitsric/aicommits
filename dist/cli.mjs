#!/usr/bin/env node
import me from"tty";import{Buffer as Pn}from"node:buffer";import W from"node:path";import jt from"node:child_process";import w,{stdin as Lt,stdout as Gt}from"node:process";import Tn from"child_process";import q from"path";import Ne from"fs";import In from"node:url";import _n,{constants as Ut}from"node:os";import Ht from"assert";import Wt from"events";import kn from"buffer";import je from"stream";import qt from"util";import*as he from"node:readline";import Kt from"node:readline";import{WriteStream as Rn}from"node:tty";import O from"fs/promises";import zt from"os";import Mn from"https";import Nn from"net";import jn from"tls";import Ln,{fileURLToPath as Gn,pathToFileURL as Un}from"url";const Hn="known-flag",Wn="unknown-flag",qn="argument",{stringify:ee}=JSON,Kn=/\B([A-Z])/g,zn=e=>e.replace(Kn,"-$1").toLowerCase(),{hasOwnProperty:Yn}=Object.prototype,te=(e,t)=>Yn.call(e,t),Vn=e=>Array.isArray(e),Yt=e=>typeof e=="function"?[e,!1]:Vn(e)?[e[0],!0]:Yt(e.type),Jn=(e,t)=>e===Boolean?t!=="false":t,Xn=(e,t)=>typeof t=="boolean"?t:e===Number&&t===""?Number.NaN:e(t),Zn=/[\s.:=]/,Qn=e=>{const t=`Flag name ${ee(e)}`;if(e.length===0)throw new Error(`${t} cannot be empty`);if(e.length===1)throw new Error(`${t} must be longer than a character`);const u=e.match(Zn);if(u)throw new Error(`${t} cannot contain ${ee(u==null?void 0:u[0])}`)},er=e=>{const t={},u=(n,r)=>{if(te(t,n))throw new Error(`Duplicate flags named ${ee(n)}`);t[n]=r};for(const n in e){if(!te(e,n))continue;Qn(n);const r=e[n],o=[[],...Yt(r),r];u(n,o);const s=zn(n);if(n!==s&&u(s,o),"alias"in r&&typeof r.alias=="string"){const{alias:i}=r,D=`Flag alias ${ee(i)} for flag ${ee(n)}`;if(i.length===0)throw new Error(`${D} cannot be empty`);if(i.length>1)throw new Error(`${D} must be a single character`);u(i,o)}}return t},tr=(e,t)=>{const u={};for(const n in e){if(!te(e,n))continue;const[r,,o,s]=t[n];if(r.length===0&&"default"in s){let{default:i}=s;typeof i=="function"&&(i=i()),u[n]=i}else u[n]=o?r:r.pop()}return u},Ce="--",ur=/[.:=]/,nr=/^-{1,2}\w/,rr=e=>{if(!nr.test(e))return;const t=!e.startsWith(Ce);let u=e.slice(t?1:2),n;const r=u.match(ur);if(r){const{index:o}=r;n=u.slice(o+1),u=u.slice(0,o)}return[u,n,t]},or=(e,{onFlag:t,onArgument:u})=>{let n;const r=(o,s)=>{if(typeof n!="function")return!0;n(o,s),n=void 0};for(let o=0;o<e.length;o+=1){const s=e[o];if(s===Ce){r();const D=e.slice(o+1);u==null||u(D,[o],!0);break}const i=rr(s);if(i){if(r(),!t)continue;const[D,l,f]=i;if(f)for(let a=0;a<D.length;a+=1){r();const c=a===D.length-1;n=t(D[a],c?l:void 0,[o,a+1,c])}else n=t(D,l,[o])}else r(s,[o])&&(u==null||u([s],[o]))}r()},sr=(e,t)=>{for(const[u,n,r]of t.reverse()){if(n){const o=e[u];let s=o.slice(0,n);if(r||(s+=o.slice(n+1)),s!=="-"){e[u]=s;continue}}e.splice(u,1)}},ir=(e,t=process.argv.slice(2),{ignore:u}={})=>{const n=[],r=er(e),o={},s=[];return s[Ce]=[],or(t,{onFlag(i,D,l){const f=te(r,i);if(!(u!=null&&u(f?Hn:Wn,i,D))){if(f){const[a,c]=r[i],d=Jn(c,D),p=(h,C)=>{n.push(l),C&&n.push(C),a.push(Xn(c,h||""))};return d===void 0?p:p(d)}te(o,i)||(o[i]=[]),o[i].push(D===void 0?!0:D),n.push(l)}},onArgument(i,D,l){u!=null&&u(qn,t[D[0]])||(s.push(...i),l?(s[Ce]=i,t.splice(D[0])):n.push(D))}}),sr(t,n),{flags:tr(e,r),unknownFlags:o,_:s}};var Dr=Object.create,Fe=Object.defineProperty,ar=Object.defineProperties,cr=Object.getOwnPropertyDescriptor,lr=Object.getOwnPropertyDescriptors,fr=Object.getOwnPropertyNames,Vt=Object.getOwnPropertySymbols,dr=Object.getPrototypeOf,Jt=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable,Xt=(e,t,u)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[t]=u,ge=(e,t)=>{for(var u in t||(t={}))Jt.call(t,u)&&Xt(e,u,t[u]);if(Vt)for(var u of Vt(t))pr.call(t,u)&&Xt(e,u,t[u]);return e},Le=(e,t)=>ar(e,lr(t)),mr=e=>Fe(e,"__esModule",{value:!0}),hr=(e,t)=>()=>(e&&(t=e(e=0)),t),Cr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Fr=(e,t,u,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of fr(t))!Jt.call(e,r)&&(u||r!=="default")&&Fe(e,r,{get:()=>t[r],enumerable:!(n=cr(t,r))||n.enumerable});return e},gr=(e,t)=>Fr(mr(Fe(e!=null?Dr(dr(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),x=hr(()=>{}),Er=Cr((e,t)=>{x(),t.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});x(),x(),x();var yr=e=>{var t,u,n;let r=(t=process.stdout.columns)!=null?t:Number.POSITIVE_INFINITY;return typeof e=="function"&&(e=e(r)),e||(e={}),Array.isArray(e)?{columns:e,stdoutColumns:r}:{columns:(u=e.columns)!=null?u:[],stdoutColumns:(n=e.stdoutColumns)!=null?n:r}};x(),x(),x(),x(),x();function wr({onlyFirst:e=!1}={}){let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}function Zt(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(wr(),"")}x();function br(e){return Number.isInteger(e)?e>=4352&&(e<=4447||e===9001||e===9002||11904<=e&&e<=12871&&e!==12351||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141):!1}var Br=gr(Er(),1);function M(e){if(typeof e!="string"||e.length===0||(e=Zt(e),e.length===0))return 0;e=e.replace((0,Br.default)(),"  ");let t=0;for(let u=0;u<e.length;u++){let n=e.codePointAt(u);n<=31||n>=127&&n<=159||n>=768&&n<=879||(n>65535&&u++,t+=br(n)?2:1)}return t}var Qt=e=>Math.max(...e.split(`
`).map(M)),vr=e=>{let t=[];for(let u of e){let{length:n}=u,r=n-t.length;for(let o=0;o<r;o+=1)t.push(0);for(let o=0;o<n;o+=1){let s=Qt(u[o]);s>t[o]&&(t[o]=s)}}return t};x();var eu=/^\d+%$/,tu={width:"auto",align:"left",contentWidth:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,horizontalPadding:0,paddingLeftString:"",paddingRightString:""},$r=(e,t)=>{var u;let n=[];for(let r=0;r<e.length;r+=1){let o=(u=t[r])!=null?u:"auto";if(typeof o=="number"||o==="auto"||o==="content-width"||typeof o=="string"&&eu.test(o)){n.push(Le(ge({},tu),{width:o,contentWidth:e[r]}));continue}if(o&&typeof o=="object"){let s=Le(ge(ge({},tu),o),{contentWidth:e[r]});s.horizontalPadding=s.paddingLeft+s.paddingRight,n.push(s);continue}throw new Error(`Invalid column width: ${JSON.stringify(o)}`)}return n};function Ar(e,t){for(let u of e){let{width:n}=u;if(n==="content-width"&&(u.width=u.contentWidth),n==="auto"){let D=Math.min(20,u.contentWidth);u.width=D,u.autoOverflow=u.contentWidth-D}if(typeof n=="string"&&eu.test(n)){let D=Number.parseFloat(n.slice(0,-1))/100;u.width=Math.floor(t*D)-(u.paddingLeft+u.paddingRight)}let{horizontalPadding:r}=u,o=1,s=o+r;if(s>=t){let D=s-t,l=Math.ceil(u.paddingLeft/r*D),f=D-l;u.paddingLeft-=l,u.paddingRight-=f,u.horizontalPadding=u.paddingLeft+u.paddingRight}u.paddingLeftString=u.paddingLeft?" ".repeat(u.paddingLeft):"",u.paddingRightString=u.paddingRight?" ".repeat(u.paddingRight):"";let i=t-u.horizontalPadding;u.width=Math.max(Math.min(u.width,i),o)}}var uu=()=>Object.assign([],{columns:0});function xr(e,t){let u=[uu()],[n]=u;for(let r of e){let o=r.width+r.horizontalPadding;n.columns+o>t&&(n=uu(),u.push(n)),n.push(r),n.columns+=o}for(let r of u){let o=r.reduce((c,d)=>c+d.width+d.horizontalPadding,0),s=t-o;if(s===0)continue;let i=r.filter(c=>"autoOverflow"in c),D=i.filter(c=>c.autoOverflow>0),l=D.reduce((c,d)=>c+d.autoOverflow,0),f=Math.min(l,s);for(let c of D){let d=Math.floor(c.autoOverflow/l*f);c.width+=d,s-=d}let a=Math.floor(s/i.length);for(let c=0;c<i.length;c+=1){let d=i[c];c===i.length-1?d.width+=s:d.width+=a,s-=a}}return u}function Sr(e,t,u){let n=$r(u,t);return Ar(n,e),xr(n,e)}x(),x(),x();var Ge=10,nu=(e=0)=>t=>`\x1B[${t+e}m`,ru=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,ou=(e=0)=>(t,u,n)=>`\x1B[${38+e};2;${t};${u};${n}m`;function Or(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[u,n]of Object.entries(t)){for(let[r,o]of Object.entries(n))t[r]={open:`\x1B[${o[0]}m`,close:`\x1B[${o[1]}m`},n[r]=t[r],e.set(o[0],o[1]);Object.defineProperty(t,u,{value:n,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",t.color.ansi=nu(),t.color.ansi256=ru(),t.color.ansi16m=ou(),t.bgColor.ansi=nu(Ge),t.bgColor.ansi256=ru(Ge),t.bgColor.ansi16m=ou(Ge),Object.defineProperties(t,{rgbToAnsi256:{value:(u,n,r)=>u===n&&n===r?u<8?16:u>248?231:Math.round((u-8)/247*24)+232:16+36*Math.round(u/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:u=>{let n=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(u.toString(16));if(!n)return[0,0,0];let{colorString:r}=n.groups;r.length===3&&(r=r.split("").map(s=>s+s).join(""));let o=Number.parseInt(r,16);return[o>>16&255,o>>8&255,o&255]},enumerable:!1},hexToAnsi256:{value:u=>t.rgbToAnsi256(...t.hexToRgb(u)),enumerable:!1},ansi256ToAnsi:{value:u=>{if(u<8)return 30+u;if(u<16)return 90+(u-8);let n,r,o;if(u>=232)n=((u-232)*10+8)/255,r=n,o=n;else{u-=16;let D=u%36;n=Math.floor(u/36)/5,r=Math.floor(D/6)/5,o=D%6/5}let s=Math.max(n,r,o)*2;if(s===0)return 30;let i=30+(Math.round(o)<<2|Math.round(r)<<1|Math.round(n));return s===2&&(i+=60),i},enumerable:!1},rgbToAnsi:{value:(u,n,r)=>t.ansi256ToAnsi(t.rgbToAnsi256(u,n,r)),enumerable:!1},hexToAnsi:{value:u=>t.ansi256ToAnsi(t.hexToAnsi256(u)),enumerable:!1}}),t}var Pr=Or(),Tr=Pr,Ee=new Set(["\x1B","\x9B"]),Ir=39,Ue="\x07",su="[",_r="]",iu="m",He=`${_r}8;;`,Du=e=>`${Ee.values().next().value}${su}${e}${iu}`,au=e=>`${Ee.values().next().value}${He}${e}${Ue}`,kr=e=>e.split(" ").map(t=>M(t)),We=(e,t,u)=>{let n=[...t],r=!1,o=!1,s=M(Zt(e[e.length-1]));for(let[i,D]of n.entries()){let l=M(D);if(s+l<=u?e[e.length-1]+=D:(e.push(D),s=0),Ee.has(D)&&(r=!0,o=n.slice(i+1).join("").startsWith(He)),r){o?D===Ue&&(r=!1,o=!1):D===iu&&(r=!1);continue}s+=l,s===u&&i<n.length-1&&(e.push(""),s=0)}!s&&e[e.length-1].length>0&&e.length>1&&(e[e.length-2]+=e.pop())},Rr=e=>{let t=e.split(" "),u=t.length;for(;u>0&&!(M(t[u-1])>0);)u--;return u===t.length?e:t.slice(0,u).join(" ")+t.slice(u).join("")},Mr=(e,t,u={})=>{if(u.trim!==!1&&e.trim()==="")return"";let n="",r,o,s=kr(e),i=[""];for(let[l,f]of e.split(" ").entries()){u.trim!==!1&&(i[i.length-1]=i[i.length-1].trimStart());let a=M(i[i.length-1]);if(l!==0&&(a>=t&&(u.wordWrap===!1||u.trim===!1)&&(i.push(""),a=0),(a>0||u.trim===!1)&&(i[i.length-1]+=" ",a++)),u.hard&&s[l]>t){let c=t-a,d=1+Math.floor((s[l]-c-1)/t);Math.floor((s[l]-1)/t)<d&&i.push(""),We(i,f,t);continue}if(a+s[l]>t&&a>0&&s[l]>0){if(u.wordWrap===!1&&a<t){We(i,f,t);continue}i.push("")}if(a+s[l]>t&&u.wordWrap===!1){We(i,f,t);continue}i[i.length-1]+=f}u.trim!==!1&&(i=i.map(l=>Rr(l)));let D=[...i.join(`
`)];for(let[l,f]of D.entries()){if(n+=f,Ee.has(f)){let{groups:c}=new RegExp(`(?:\\${su}(?<code>\\d+)m|\\${He}(?<uri>.*)${Ue})`).exec(D.slice(l).join(""))||{groups:{}};if(c.code!==void 0){let d=Number.parseFloat(c.code);r=d===Ir?void 0:d}else c.uri!==void 0&&(o=c.uri.length===0?void 0:c.uri)}let a=Tr.codes.get(Number(r));D[l+1]===`
`?(o&&(n+=au("")),r&&a&&(n+=Du(a))):f===`
`&&(r&&a&&(n+=Du(r)),o&&(n+=au(o)))}return n};function Nr(e,t,u){return String(e).normalize().replace(/\r\n/g,`
`).split(`
`).map(n=>Mr(n,t,u)).join(`
`)}var cu=e=>Array.from({length:e}).fill("");function jr(e,t){let u=[],n=0;for(let r of e){let o=0,s=r.map(D=>{var l;let f=(l=t[n])!=null?l:"";n+=1,D.preprocess&&(f=D.preprocess(f)),Qt(f)>D.width&&(f=Nr(f,D.width,{hard:!0}));let a=f.split(`
`);if(D.postprocess){let{postprocess:c}=D;a=a.map((d,p)=>c.call(D,d,p))}return D.paddingTop&&a.unshift(...cu(D.paddingTop)),D.paddingBottom&&a.push(...cu(D.paddingBottom)),a.length>o&&(o=a.length),Le(ge({},D),{lines:a})}),i=[];for(let D=0;D<o;D+=1){let l=s.map(f=>{var a;let c=(a=f.lines[D])!=null?a:"",d=Number.isFinite(f.width)?" ".repeat(f.width-M(c)):"",p=f.paddingLeftString;return f.align==="right"&&(p+=d),p+=c,f.align==="left"&&(p+=d),p+f.paddingRightString}).join("");i.push(l)}u.push(i.join(`
`))}return u.join(`
`)}function Lr(e,t){if(!e||e.length===0)return"";let u=vr(e),n=u.length;if(n===0)return"";let{stdoutColumns:r,columns:o}=yr(t);if(o.length>n)throw new Error(`${o.length} columns defined, but only ${n} columns found`);let s=Sr(r,o,u);return e.map(i=>jr(s,i)).join(`
`)}x();var Gr=["<",">","=",">=","<="];function Ur(e){if(!Gr.includes(e))throw new TypeError(`Invalid breakpoint operator: ${e}`)}function Hr(e){let t=Object.keys(e).map(u=>{let[n,r]=u.split(" ");Ur(n);let o=Number.parseInt(r,10);if(Number.isNaN(o))throw new TypeError(`Invalid breakpoint value: ${r}`);let s=e[u];return{operator:n,breakpoint:o,value:s}}).sort((u,n)=>n.breakpoint-u.breakpoint);return u=>{var n;return(n=t.find(({operator:r,breakpoint:o})=>r==="="&&u===o||r===">"&&u>o||r==="<"&&u<o||r===">="&&u>=o||r==="<="&&u<=o))==null?void 0:n.value}}const Wr=e=>e.replace(/[\W_]([a-z\d])?/gi,(t,u)=>u?u.toUpperCase():""),qr=e=>e.replace(/\B([A-Z])/g,"-$1").toLowerCase(),Kr={"> 80":[{width:"content-width",paddingLeft:2,paddingRight:8},{width:"auto"}],"> 40":[{width:"auto",paddingLeft:2,paddingRight:8,preprocess:e=>e.trim()},{width:"100%",paddingLeft:2,paddingBottom:1}],"> 0":{stdoutColumns:1e3,columns:[{width:"content-width",paddingLeft:2,paddingRight:8},{width:"content-width"}]}};function zr(e){let t=!1;return{type:"table",data:{tableData:Object.keys(e).sort((u,n)=>u.localeCompare(n)).map(u=>{const n=e[u],r="alias"in n;return r&&(t=!0),{name:u,flag:n,flagFormatted:`--${qr(u)}`,aliasesEnabled:t,aliasFormatted:r?`-${n.alias}`:void 0}}).map(u=>(u.aliasesEnabled=t,[{type:"flagName",data:u},{type:"flagDescription",data:u}])),tableBreakpoints:Kr}}}const lu=e=>!e||(e.version??(e.help?e.help.version:void 0)),fu=e=>{var u;const t="parent"in e&&((u=e.parent)==null?void 0:u.name);return(t?`${t} `:"")+e.name};function Yr(e){const t=[];e.name&&t.push(fu(e));const u=lu(e)??("parent"in e&&lu(e.parent));if(u&&t.push(`v${u}`),t.length!==0)return{id:"name",type:"text",data:`${t.join(" ")}
`}}function Vr(e){const{help:t}=e;if(!(!t||!t.description))return{id:"description",type:"text",data:`${t.description}
`}}function Jr(e){var u;const t=e.help||{};if("usage"in t)return t.usage?{id:"usage",type:"section",data:{title:"Usage:",body:Array.isArray(t.usage)?t.usage.join(`
`):t.usage}}:void 0;if(e.name){const n=[],r=[fu(e)];if(e.flags&&Object.keys(e.flags).length>0&&r.push("[flags...]"),e.parameters&&e.parameters.length>0){const{parameters:o}=e,s=o.indexOf("--"),i=s>-1&&o.slice(s+1).some(D=>D.startsWith("<"));r.push(o.map(D=>D!=="--"?D:i?"--":"[--]").join(" "))}if(r.length>1&&n.push(r.join(" ")),"commands"in e&&((u=e.commands)!=null&&u.length)&&n.push(`${e.name} <command>`),n.length>0)return{id:"usage",type:"section",data:{title:"Usage:",body:n.join(`
`)}}}}function Xr(e){var t;return!("commands"in e)||!((t=e.commands)!=null&&t.length)?void 0:{id:"commands",type:"section",data:{title:"Commands:",body:{type:"table",data:{tableData:e.commands.map(u=>[u.options.name,u.options.help?u.options.help.description:""]),tableOptions:[{width:"content-width",paddingLeft:2,paddingRight:8}]}},indentBody:0}}}function Zr(e){if(!(!e.flags||Object.keys(e.flags).length===0))return{id:"flags",type:"section",data:{title:"Flags:",body:zr(e.flags),indentBody:0}}}function Qr(e){const{help:t}=e;if(!t||!t.examples||t.examples.length===0)return;let{examples:u}=t;if(Array.isArray(u)&&(u=u.join(`
`)),u)return{id:"examples",type:"section",data:{title:"Examples:",body:u}}}function eo(e){if(!("alias"in e)||!e.alias)return;const{alias:t}=e;return{id:"aliases",type:"section",data:{title:"Aliases:",body:Array.isArray(t)?t.join(", "):t}}}const to=e=>[Yr,Vr,Jr,Xr,Zr,Qr,eo].map(t=>t(e)).filter(Boolean),uo=me.WriteStream.prototype.hasColors();class no{text(t){return t}bold(t){return uo?`\x1B[1m${t}\x1B[22m`:t.toLocaleUpperCase()}indentText({text:t,spaces:u}){return t.replace(/^/gm," ".repeat(u))}heading(t){return this.bold(t)}section({title:t,body:u,indentBody:n=2}){return`${(t?`${this.heading(t)}
`:"")+(u?this.indentText({text:this.render(u),spaces:n}):"")}
`}table({tableData:t,tableOptions:u,tableBreakpoints:n}){return Lr(t.map(r=>r.map(o=>this.render(o))),n?Hr(n):u)}flagParameter(t){return t===Boolean?"":t===String?"<string>":t===Number?"<number>":Array.isArray(t)?this.flagParameter(t[0]):"<value>"}flagOperator(t){return" "}flagName(t){const{flag:u,flagFormatted:n,aliasesEnabled:r,aliasFormatted:o}=t;let s="";if(o?s+=`${o}, `:r&&(s+="    "),s+=n,"placeholder"in u&&typeof u.placeholder=="string")s+=`${this.flagOperator(t)}${u.placeholder}`;else{const i=this.flagParameter("type"in u?u.type:u);i&&(s+=`${this.flagOperator(t)}${i}`)}return s}flagDefault(t){return JSON.stringify(t)}flagDescription({flag:t}){let u="description"in t?t.description??"":"";if("default"in t){let{default:n}=t;typeof n=="function"&&(n=n()),n&&(u+=` (default: ${this.flagDefault(n)})`)}return u}render(t){if(typeof t=="string")return t;if(Array.isArray(t))return t.map(u=>this.render(u)).join(`
`);if("type"in t&&this[t.type]){const u=this[t.type];if(typeof u=="function")return u.call(this,t.data)}throw new Error(`Invalid node type: ${JSON.stringify(t)}`)}}const qe=/^[\w.-]+$/,{stringify:T}=JSON,ro=/[|\\{}()[\]^$+*?.]/;function Ke(e){const t=[];let u,n;for(const r of e){if(n)throw new Error(`Invalid parameter: Spread parameter ${T(n)} must be last`);const o=r[0],s=r[r.length-1];let i;if(o==="<"&&s===">"&&(i=!0,u))throw new Error(`Invalid parameter: Required parameter ${T(r)} cannot come after optional parameter ${T(u)}`);if(o==="["&&s==="]"&&(i=!1,u=r),i===void 0)throw new Error(`Invalid parameter: ${T(r)}. Must be wrapped in <> (required parameter) or [] (optional parameter)`);let D=r.slice(1,-1);const l=D.slice(-3)==="...";l&&(n=r,D=D.slice(0,-3));const f=D.match(ro);if(f)throw new Error(`Invalid parameter: ${T(r)}. Invalid character found ${T(f[0])}`);t.push({name:D,required:i,spread:l})}return t}function ze(e,t,u,n){for(let r=0;r<t.length;r+=1){const{name:o,required:s,spread:i}=t[r],D=Wr(o);if(D in e)throw new Error(`Invalid parameter: ${T(o)} is used more than once.`);const l=i?u.slice(r):u[r];if(i&&(r=t.length),s&&(!l||i&&l.length===0))return console.error(`Error: Missing required parameter ${T(o)}
`),n(),process.exit(1);e[D]=l}}function oo(e){return e===void 0||e!==!1}function du(e,t,u,n){const r={...t.flags},o=t.version;o&&(r.version={type:Boolean,description:"Show version"});const{help:s}=t,i=oo(s);i&&!("help"in r)&&(r.help={type:Boolean,alias:"h",description:"Show help"});const D=ir(r,n,{ignore:t.ignoreArgv}),l=()=>{console.log(t.version)};if(o&&D.flags.version===!0)return l(),process.exit(0);const f=new no,a=i&&(s!=null&&s.render)?s.render:p=>f.render(p),c=p=>{const h=to({...t,...p?{help:p}:{},flags:r});console.log(a(h,f))};if(i&&D.flags.help===!0)return c(),process.exit(0);if(t.parameters){let{parameters:p}=t,h=D._;const C=p.indexOf("--"),F=p.slice(C+1),B=Object.create(null);if(C>-1&&F.length>0){p=p.slice(0,C);const _=D._["--"];h=h.slice(0,-_.length||void 0),ze(B,Ke(p),h,c),ze(B,Ke(F),_,c)}else ze(B,Ke(p),h,c);Object.assign(D._,B)}const d={...D,showVersion:l,showHelp:c};return typeof u=="function"&&u(d),{command:e,...d}}function so(e,t){const u=new Map;for(const n of t){const r=[n.options.name],{alias:o}=n.options;o&&(Array.isArray(o)?r.push(...o):r.push(o));for(const s of r){if(u.has(s))throw new Error(`Duplicate command name found: ${T(s)}`);u.set(s,n)}}return u.get(e)}function io(e,t,u=process.argv.slice(2)){if(!e)throw new Error("Options is required");if("name"in e&&(!e.name||!qe.test(e.name)))throw new Error(`Invalid script name: ${T(e.name)}`);const n=u[0];if(e.commands&&qe.test(n)){const r=so(n,e.commands);if(r)return du(r.options.name,{...r.options,parent:e},r.callback,u.slice(1))}return du(void 0,e,t,u)}function Ye(e,t){if(!e)throw new Error("Command options are required");const{name:u}=e;if(e.name===void 0)throw new Error("Command name is required");if(!qe.test(u))throw new Error(`Invalid command name ${JSON.stringify(u)}. Command names must be one word.`);return{options:e,callback:t}}var pu="0.0.0-semantic-release",Do="Writes your git commit messages for you with AI",b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N={},ao={get exports(){return N},set exports(e){N=e}},Ve,mu;function co(){if(mu)return Ve;mu=1,Ve=n,n.sync=r;var e=Ne;function t(o,s){var i=s.pathExt!==void 0?s.pathExt:process.env.PATHEXT;if(!i||(i=i.split(";"),i.indexOf("")!==-1))return!0;for(var D=0;D<i.length;D++){var l=i[D].toLowerCase();if(l&&o.substr(-l.length).toLowerCase()===l)return!0}return!1}function u(o,s,i){return!o.isSymbolicLink()&&!o.isFile()?!1:t(s,i)}function n(o,s,i){e.stat(o,function(D,l){i(D,D?!1:u(l,o,s))})}function r(o,s){return u(e.statSync(o),o,s)}return Ve}var Je,hu;function lo(){if(hu)return Je;hu=1,Je=t,t.sync=u;var e=Ne;function t(o,s,i){e.stat(o,function(D,l){i(D,D?!1:n(l,s))})}function u(o,s){return n(e.statSync(o),s)}function n(o,s){return o.isFile()&&r(o,s)}function r(o,s){var i=o.mode,D=o.uid,l=o.gid,f=s.uid!==void 0?s.uid:process.getuid&&process.getuid(),a=s.gid!==void 0?s.gid:process.getgid&&process.getgid(),c=parseInt("100",8),d=parseInt("010",8),p=parseInt("001",8),h=c|d,C=i&p||i&d&&l===a||i&c&&D===f||i&h&&f===0;return C}return Je}var ye;process.platform==="win32"||b.TESTING_WINDOWS?ye=co():ye=lo();var fo=Xe;Xe.sync=po;function Xe(e,t,u){if(typeof t=="function"&&(u=t,t={}),!u){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,r){Xe(e,t||{},function(o,s){o?r(o):n(s)})})}ye(e,t||{},function(n,r){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,r=!1),u(n,r)})}function po(e,t){try{return ye.sync(e,t||{})}catch(u){if(t&&t.ignoreErrors||u.code==="EACCES")return!1;throw u}}const K=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Cu=q,mo=K?";":":",Fu=fo,gu=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),Eu=(e,t)=>{const u=t.colon||mo,n=e.match(/\//)||K&&e.match(/\\/)?[""]:[...K?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(u)],r=K?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=K?r.split(u):[""];return K&&e.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:r}},yu=(e,t,u)=>{typeof t=="function"&&(u=t,t={}),t||(t={});const{pathEnv:n,pathExt:r,pathExtExe:o}=Eu(e,t),s=[],i=l=>new Promise((f,a)=>{if(l===n.length)return t.all&&s.length?f(s):a(gu(e));const c=n[l],d=/^".*"$/.test(c)?c.slice(1,-1):c,p=Cu.join(d,e),h=!d&&/^\.[\\\/]/.test(e)?e.slice(0,2)+p:p;f(D(h,l,0))}),D=(l,f,a)=>new Promise((c,d)=>{if(a===r.length)return c(i(f+1));const p=r[a];Fu(l+p,{pathExt:o},(h,C)=>{if(!h&&C)if(t.all)s.push(l+p);else return c(l+p);return c(D(l,f,a+1))})});return u?i(0).then(l=>u(null,l),u):i(0)},ho=(e,t)=>{t=t||{};const{pathEnv:u,pathExt:n,pathExtExe:r}=Eu(e,t),o=[];for(let s=0;s<u.length;s++){const i=u[s],D=/^".*"$/.test(i)?i.slice(1,-1):i,l=Cu.join(D,e),f=!D&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;for(let a=0;a<n.length;a++){const c=f+n[a];try{if(Fu.sync(c,{pathExt:r}))if(t.all)o.push(c);else return c}catch{}}}if(t.all&&o.length)return o;if(t.nothrow)return null;throw gu(e)};var Co=yu;yu.sync=ho;var we={},Fo={get exports(){return we},set exports(e){we=e}};const wu=(e={})=>{const t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};Fo.exports=wu,we.default=wu;const bu=q,go=Co,Eo=we;function Bu(e,t){const u=e.options.env||process.env,n=process.cwd(),r=e.options.cwd!=null,o=r&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(e.options.cwd)}catch{}let s;try{s=go.sync(e.command,{path:u[Eo({env:u})],pathExt:t?bu.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return s&&(s=bu.resolve(r?e.options.cwd:"",s)),s}function yo(e){return Bu(e)||Bu(e,!0)}var wo=yo,Ze={};const Qe=/([()\][%!^"`<>&|;, *?])/g;function bo(e){return e=e.replace(Qe,"^$1"),e}function Bo(e,t){return e=`${e}`,e=e.replace(/(\\*)"/g,'$1$1\\"'),e=e.replace(/(\\*)$/,"$1$1"),e=`"${e}"`,e=e.replace(Qe,"^$1"),t&&(e=e.replace(Qe,"^$1")),e}Ze.command=bo,Ze.argument=Bo;var vo=/^#!(.*)/;const $o=vo;var Ao=(e="")=>{const t=e.match($o);if(!t)return null;const[u,n]=t[0].replace(/#! ?/,"").split(" "),r=u.split("/").pop();return r==="env"?n:n?`${r} ${n}`:r};const et=Ne,xo=Ao;function So(e){const u=Buffer.alloc(150);let n;try{n=et.openSync(e,"r"),et.readSync(n,u,0,150,0),et.closeSync(n)}catch{}return xo(u.toString())}var Oo=So;const Po=q,vu=wo,$u=Ze,To=Oo,Io=process.platform==="win32",_o=/\.(?:com|exe)$/i,ko=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Ro(e){e.file=vu(e);const t=e.file&&To(e.file);return t?(e.args.unshift(e.file),e.command=t,vu(e)):e.file}function Mo(e){if(!Io)return e;const t=Ro(e),u=!_o.test(t);if(e.options.forceShell||u){const n=ko.test(t);e.command=Po.normalize(e.command),e.command=$u.command(e.command),e.args=e.args.map(o=>$u.argument(o,n));const r=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${r}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function No(e,t,u){t&&!Array.isArray(t)&&(u=t,t=null),t=t?t.slice(0):[],u=Object.assign({},u);const n={command:e,args:t,options:u,file:void 0,original:{command:e,args:t}};return u.shell?n:Mo(n)}var jo=No;const tt=process.platform==="win32";function ut(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function Lo(e,t){if(!tt)return;const u=e.emit;e.emit=function(n,r){if(n==="exit"){const o=Au(r,t);if(o)return u.call(e,"error",o)}return u.apply(e,arguments)}}function Au(e,t){return tt&&e===1&&!t.file?ut(t.original,"spawn"):null}function Go(e,t){return tt&&e===1&&!t.file?ut(t.original,"spawnSync"):null}var Uo={hookChildProcess:Lo,verifyENOENT:Au,verifyENOENTSync:Go,notFoundError:ut};const xu=Tn,nt=jo,rt=Uo;function Su(e,t,u){const n=nt(e,t,u),r=xu.spawn(n.command,n.args,n.options);return rt.hookChildProcess(r,n),r}function Ho(e,t,u){const n=nt(e,t,u),r=xu.spawnSync(n.command,n.args,n.options);return r.error=r.error||rt.verifyENOENTSync(r.status,n),r}ao.exports=Su,N.spawn=Su,N.sync=Ho,N._parse=nt,N._enoent=rt;function Wo(e){const t=typeof e=="string"?`
`:`
`.charCodeAt(),u=typeof e=="string"?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,-1)),e[e.length-1]===u&&(e=e.slice(0,-1)),e}function Ou(e={}){const{env:t=process.env,platform:u=process.platform}=e;return u!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"}function qo(e={}){const{cwd:t=w.cwd(),path:u=w.env[Ou()],execPath:n=w.execPath}=e;let r;const o=t instanceof URL?In.fileURLToPath(t):t;let s=W.resolve(o);const i=[];for(;r!==s;)i.push(W.join(s,"node_modules/.bin")),r=s,s=W.resolve(s,"..");return i.push(W.resolve(o,n,"..")),[...i,u].join(W.delimiter)}function Ko({env:e=w.env,...t}={}){e={...e};const u=Ou({env:e});return t.path=e[u],e[u]=qo(t),e}const zo=(e,t,u,n)=>{if(u==="length"||u==="prototype"||u==="arguments"||u==="caller")return;const r=Object.getOwnPropertyDescriptor(e,u),o=Object.getOwnPropertyDescriptor(t,u);!Yo(r,o)&&n||Object.defineProperty(e,u,o)},Yo=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},Vo=(e,t)=>{const u=Object.getPrototypeOf(t);u!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,u)},Jo=(e,t)=>`/* Wrapped ${e}*/
${t}`,Xo=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Zo=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Qo=(e,t,u)=>{const n=u===""?"":`with ${u.trim()}() `,r=Jo.bind(null,n,t.toString());Object.defineProperty(r,"name",Zo),Object.defineProperty(e,"toString",{...Xo,value:r})};function es(e,t,{ignoreNonConfigurable:u=!1}={}){const{name:n}=e;for(const r of Reflect.ownKeys(t))zo(e,t,r,u);return Vo(e,t),Qo(e,t,n),e}const be=new WeakMap,Pu=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let u,n=0;const r=e.displayName||e.name||"<anonymous>",o=function(...s){if(be.set(o,++n),n===1)u=e.apply(this,s),e=null;else if(t.throw===!0)throw new Error(`Function \`${r}\` can only be called once`);return u};return es(o,e),be.set(o,n),o};Pu.callCount=e=>{if(!be.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return be.get(e)};const ts=function(){const e=Iu-Tu+1;return Array.from({length:e},us)},us=function(e,t){return{name:`SIGRT${t+1}`,number:Tu+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Tu=34,Iu=64,ns=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}],_u=function(){const e=ts();return[...ns,...e].map(rs)},rs=function({name:e,number:t,description:u,action:n,forced:r=!1,standard:o}){const{signals:{[e]:s}}=Ut,i=s!==void 0;return{name:e,number:i?s:t,description:u,supported:i,action:n,forced:r,standard:o}},os=function(){const e=_u();return Object.fromEntries(e.map(ss))},ss=function({name:e,number:t,description:u,supported:n,action:r,forced:o,standard:s}){return[e,{name:e,number:t,description:u,supported:n,action:r,forced:o,standard:s}]},is=os(),Ds=function(){const e=_u(),t=Iu+1,u=Array.from({length:t},(n,r)=>as(r,e));return Object.assign({},...u)},as=function(e,t){const u=cs(e,t);if(u===void 0)return{};const{name:n,description:r,supported:o,action:s,forced:i,standard:D}=u;return{[e]:{name:n,number:e,description:r,supported:o,action:s,forced:i,standard:D}}},cs=function(e,t){const u=t.find(({name:n})=>Ut.signals[n]===e);return u!==void 0?u:t.find(n=>n.number===e)};Ds();const ls=({timedOut:e,timeout:t,errorCode:u,signal:n,signalDescription:r,exitCode:o,isCanceled:s})=>e?`timed out after ${t} milliseconds`:s?"was canceled":u!==void 0?`failed with ${u}`:n!==void 0?`was killed with ${n} (${r})`:o!==void 0?`failed with exit code ${o}`:"failed",ku=({stdout:e,stderr:t,all:u,error:n,signal:r,exitCode:o,command:s,escapedCommand:i,timedOut:D,isCanceled:l,killed:f,parsed:{options:{timeout:a}}})=>{o=o===null?void 0:o,r=r===null?void 0:r;const c=r===void 0?void 0:is[r].description,d=n&&n.code,h=`Command ${ls({timedOut:D,timeout:a,errorCode:d,signal:r,signalDescription:c,exitCode:o,isCanceled:l})}: ${s}`,C=Object.prototype.toString.call(n)==="[object Error]",F=C?`${h}
${n.message}`:h,B=[F,t,e].filter(Boolean).join(`
`);return C?(n.originalMessage=n.message,n.message=B):n=new Error(B),n.shortMessage=F,n.command=s,n.escapedCommand=i,n.exitCode=o,n.signal=r,n.signalDescription=c,n.stdout=e,n.stderr=t,u!==void 0&&(n.all=u),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=Boolean(D),n.isCanceled=l,n.killed=f&&!D,n},Be=["stdin","stdout","stderr"],fs=e=>Be.some(t=>e[t]!==void 0),ds=e=>{if(!e)return;const{stdio:t}=e;if(t===void 0)return Be.map(n=>e[n]);if(fs(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Be.map(n=>`\`${n}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);const u=Math.max(t.length,Be.length);return Array.from({length:u},(n,r)=>t[r])};var z={},Ru={get exports(){return z},set exports(e){z=e}},ve={},ps={get exports(){return ve},set exports(e){ve=e}},Mu;function ms(){return Mu||(Mu=1,function(e){e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],process.platform!=="win32"&&e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),process.platform==="linux"&&e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")}(ps)),ve}var g=b.process;const j=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};if(!j(g))Ru.exports=function(){return function(){}};else{var hs=Ht,ue=ms(),Cs=/^win/i.test(g.platform),$e=Wt;typeof $e!="function"&&($e=$e.EventEmitter);var v;g.__signal_exit_emitter__?v=g.__signal_exit_emitter__:(v=g.__signal_exit_emitter__=new $e,v.count=0,v.emitted={}),v.infinite||(v.setMaxListeners(1/0),v.infinite=!0),Ru.exports=function(e,t){if(!j(b.process))return function(){};hs.equal(typeof e,"function","a callback must be provided for exit handler"),ne===!1&&Nu();var u="exit";t&&t.alwaysLast&&(u="afterexit");var n=function(){v.removeListener(u,e),v.listeners("exit").length===0&&v.listeners("afterexit").length===0&&ot()};return v.on(u,e),n};var ot=function(){!ne||!j(b.process)||(ne=!1,ue.forEach(function(t){try{g.removeListener(t,st[t])}catch{}}),g.emit=it,g.reallyExit=ju,v.count-=1)};z.unload=ot;var Y=function(t,u,n){v.emitted[t]||(v.emitted[t]=!0,v.emit(t,u,n))},st={};ue.forEach(function(e){st[e]=function(){if(j(b.process)){var u=g.listeners(e);u.length===v.count&&(ot(),Y("exit",null,e),Y("afterexit",null,e),Cs&&e==="SIGHUP"&&(e="SIGINT"),g.kill(g.pid,e))}}}),z.signals=function(){return ue};var ne=!1,Nu=function(){ne||!j(b.process)||(ne=!0,v.count+=1,ue=ue.filter(function(t){try{return g.on(t,st[t]),!0}catch{return!1}}),g.emit=gs,g.reallyExit=Fs)};z.load=Nu;var ju=g.reallyExit,Fs=function(t){j(b.process)&&(g.exitCode=t||0,Y("exit",g.exitCode,null),Y("afterexit",g.exitCode,null),ju.call(g,g.exitCode))},it=g.emit,gs=function(t,u){if(t==="exit"&&j(b.process)){u!==void 0&&(g.exitCode=u);var n=it.apply(this,arguments);return Y("exit",g.exitCode,null),Y("afterexit",g.exitCode,null),n}else return it.apply(this,arguments)}}const Es=1e3*5,ys=(e,t="SIGTERM",u={})=>{const n=e(t);return ws(e,t,u,n),n},ws=(e,t,u,n)=>{if(!bs(t,u,n))return;const r=vs(u),o=setTimeout(()=>{e("SIGKILL")},r);o.unref&&o.unref()},bs=(e,{forceKillAfterTimeout:t},u)=>Bs(e)&&t!==!1&&u,Bs=e=>e===_n.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",vs=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return Es;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},$s=(e,t)=>{e.kill()&&(t.isCanceled=!0)},As=(e,t,u)=>{e.kill(t),u(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},xs=(e,{timeout:t,killSignal:u="SIGTERM"},n)=>{if(t===0||t===void 0)return n;let r;const o=new Promise((i,D)=>{r=setTimeout(()=>{As(e,u,D)},t)}),s=n.finally(()=>{clearTimeout(r)});return Promise.race([o,s])},Ss=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},Os=async(e,{cleanup:t,detached:u},n)=>{if(!t||u)return n;const r=z(()=>{e.kill()});return n.finally(()=>{r()})};function Ps(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}var L={},Ts={get exports(){return L},set exports(e){L=e}};const{PassThrough:Is}=je;var _s=e=>{e={...e};const{array:t}=e;let{encoding:u}=e;const n=u==="buffer";let r=!1;t?r=!(u||n):u=u||"utf8",n&&(u=null);const o=new Is({objectMode:r});u&&o.setEncoding(u);let s=0;const i=[];return o.on("data",D=>{i.push(D),r?s=i.length:s+=D.length}),o.getBufferedValue=()=>t?i:n?Buffer.concat(i,s):i.join(""),o.getBufferedLength=()=>s,o};const{constants:ks}=kn,Rs=je,{promisify:Ms}=qt,Ns=_s,js=Ms(Rs.pipeline);class Lu extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function Dt(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};const{maxBuffer:u}=t,n=Ns(t);return await new Promise((r,o)=>{const s=i=>{i&&n.getBufferedLength()<=ks.MAX_LENGTH&&(i.bufferedData=n.getBufferedValue()),o(i)};(async()=>{try{await js(e,n),r()}catch(i){s(i)}})(),n.on("data",()=>{n.getBufferedLength()>u&&s(new Lu)})}),n.getBufferedValue()}Ts.exports=Dt,L.buffer=(e,t)=>Dt(e,{...t,encoding:"buffer"}),L.array=(e,t)=>Dt(e,{...t,array:!0}),L.MaxBufferError=Lu;const{PassThrough:Ls}=je;var Gs=function(){var e=[],t=new Ls({objectMode:!0});return t.setMaxListeners(0),t.add=u,t.isEmpty=n,t.on("unpipe",r),Array.prototype.slice.call(arguments).forEach(u),t;function u(o){return Array.isArray(o)?(o.forEach(u),this):(e.push(o),o.once("end",r.bind(null,o)),o.once("error",t.emit.bind(t,"error")),o.pipe(t,{end:!1}),this)}function n(){return e.length==0}function r(o){e=e.filter(function(s){return s!==o}),!e.length&&t.readable&&t.end()}};const Us=(e,t)=>{t!==void 0&&(Ps(t)?t.pipe(e.stdin):e.stdin.end(t))},Hs=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;const u=Gs();return e.stdout&&u.add(e.stdout),e.stderr&&u.add(e.stderr),u},at=async(e,t)=>{if(!(!e||t===void 0)){e.destroy();try{return await t}catch(u){return u.bufferedData}}},ct=(e,{encoding:t,buffer:u,maxBuffer:n})=>{if(!(!e||!u))return t?L(e,{encoding:t,maxBuffer:n}):L.buffer(e,{maxBuffer:n})},Ws=async({stdout:e,stderr:t,all:u},{encoding:n,buffer:r,maxBuffer:o},s)=>{const i=ct(e,{encoding:n,buffer:r,maxBuffer:o}),D=ct(t,{encoding:n,buffer:r,maxBuffer:o}),l=ct(u,{encoding:n,buffer:r,maxBuffer:o*2});try{return await Promise.all([s,i,D,l])}catch(f){return Promise.all([{error:f,signal:f.signal,timedOut:f.timedOut},at(e,i),at(t,D),at(u,l)])}},qs=(async()=>{})().constructor.prototype,Ks=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(qs,e)]),Gu=(e,t)=>{for(const[u,n]of Ks){const r=typeof t=="function"?(...o)=>Reflect.apply(n.value,t(),o):n.value.bind(t);Reflect.defineProperty(e,u,{...n,value:r})}return e},zs=e=>new Promise((t,u)=>{e.on("exit",(n,r)=>{t({exitCode:n,signal:r})}),e.on("error",n=>{u(n)}),e.stdin&&e.stdin.on("error",n=>{u(n)})}),Uu=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],Ys=/^[\w.-]+$/,Vs=/"/g,Js=e=>typeof e!="string"||Ys.test(e)?e:`"${e.replace(Vs,'\\"')}"`,Xs=(e,t)=>Uu(e,t).join(" "),Zs=(e,t)=>Uu(e,t).map(u=>Js(u)).join(" "),Qs=1e3*1e3*100,ei=({env:e,extendEnv:t,preferLocal:u,localDir:n,execPath:r})=>{const o=t?{...w.env,...e}:e;return u?Ko({env:o,cwd:n,execPath:r}):o},ti=(e,t,u={})=>{const n=N._parse(e,t,u);return e=n.command,t=n.args,u=n.options,u={maxBuffer:Qs,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:u.cwd||w.cwd(),execPath:w.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...u},u.env=ei(u),u.stdio=ds(u),w.platform==="win32"&&W.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:u,parsed:n}},lt=(e,t,u)=>typeof t!="string"&&!Pn.isBuffer(t)?u===void 0?void 0:"":e.stripFinalNewline?Wo(t):t;function G(e,t,u){const n=ti(e,t,u),r=Xs(e,t),o=Zs(e,t);Ss(n.options);let s;try{s=jt.spawn(n.file,n.args,n.options)}catch(d){const p=new jt.ChildProcess,h=Promise.reject(ku({error:d,stdout:"",stderr:"",all:"",command:r,escapedCommand:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return Gu(p,h)}const i=zs(s),D=xs(s,n.options,i),l=Os(s,n.options,D),f={isCanceled:!1};s.kill=ys.bind(null,s.kill.bind(s)),s.cancel=$s.bind(null,s,f);const c=Pu(async()=>{const[{error:d,exitCode:p,signal:h,timedOut:C},F,B,_]=await Ws(s,n.options,l),pe=lt(n.options,F),R=lt(n.options,B),Me=lt(n.options,_);if(d||p!==0||h!==null){const H=ku({error:d,exitCode:p,signal:h,stdout:pe,stderr:R,all:Me,command:r,escapedCommand:o,parsed:n,timedOut:C,isCanceled:f.isCanceled||(n.options.signal?n.options.signal.aborted:!1),killed:s.killed});if(!n.options.reject)return H;throw H}return{command:r,escapedCommand:o,exitCode:0,stdout:pe,stderr:R,all:Me,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return Us(s,n.options.input),s.all=Hs(s,n.options),Gu(s,c)}let U=!0;const V=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let Hu=0;if(V.process&&V.process.env&&V.process.stdout){const{FORCE_COLOR:e,NODE_DISABLE_COLORS:t,NO_COLOR:u,TERM:n}=V.process.env;t||u||e==="0"?U=!1:e==="1"||e==="2"||e==="3"?U=!0:n==="dumb"?U=!1:"CI"in V.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(r=>r in V.process.env)?U=!0:U=process.stdout.isTTY,U&&(Hu=n&&n.endsWith("-256color")?2:1)}let Wu={enabled:U,supportLevel:Hu};function re(e,t,u=1){const n=`\x1B[${e}m`,r=`\x1B[${t}m`,o=new RegExp(`\\x1b\\[${t}m`,"g");return s=>Wu.enabled&&Wu.supportLevel>=u?n+(""+s).replace(o,n)+r:""+s}const Ae=re(2,22),ft=re(30,39),J=re(31,39),oe=re(32,39),dt=re(46,49),pt="\x1B",y=`${pt}[`,ui="\x07",mt={to(e,t){return t?`${y}${t+1};${e+1}H`:`${y}${e+1}G`},move(e,t){let u="";return e<0?u+=`${y}${-e}D`:e>0&&(u+=`${y}${e}C`),t<0?u+=`${y}${-t}A`:t>0&&(u+=`${y}${t}B`),u},up:(e=1)=>`${y}${e}A`,down:(e=1)=>`${y}${e}B`,forward:(e=1)=>`${y}${e}C`,backward:(e=1)=>`${y}${e}D`,nextLine:(e=1)=>`${y}E`.repeat(e),prevLine:(e=1)=>`${y}F`.repeat(e),left:`${y}G`,hide:`${y}?25l`,show:`${y}?25h`,save:`${pt}7`,restore:`${pt}8`},ni={up:(e=1)=>`${y}S`.repeat(e),down:(e=1)=>`${y}T`.repeat(e)},ri={screen:`${y}2J`,up:(e=1)=>`${y}1J`.repeat(e),down:(e=1)=>`${y}J`.repeat(e),line:`${y}2K`,lineEnd:`${y}K`,lineStart:`${y}1K`,lines(e){let t="";for(let u=0;u<e;u++)t+=this.line+(u<e-1?mt.up():"");return e&&(t+=mt.left),t}};var A={cursor:mt,scroll:ni,erase:ri,beep:ui},m={},oi={get exports(){return m},set exports(e){m=e}};let si=me,ii=!("NO_COLOR"in process.env||process.argv.includes("--no-color"))&&("FORCE_COLOR"in process.env||process.argv.includes("--color")||process.platform==="win32"||si.isatty(1)&&process.env.TERM!=="dumb"||"CI"in process.env),E=(e,t,u=e)=>n=>{let r=""+n,o=r.indexOf(t,e.length);return~o?e+qu(r,t,u,o)+t:e+r+t},qu=(e,t,u,n)=>{let r=e.substring(0,n)+u,o=e.substring(n+t.length),s=o.indexOf(t);return~s?r+qu(o,t,u,s):r+o},Ku=(e=ii)=>({isColorSupported:e,reset:e?t=>`\x1B[0m${t}\x1B[0m`:String,bold:e?E("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"):String,dim:e?E("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"):String,italic:e?E("\x1B[3m","\x1B[23m"):String,underline:e?E("\x1B[4m","\x1B[24m"):String,inverse:e?E("\x1B[7m","\x1B[27m"):String,hidden:e?E("\x1B[8m","\x1B[28m"):String,strikethrough:e?E("\x1B[9m","\x1B[29m"):String,black:e?E("\x1B[30m","\x1B[39m"):String,red:e?E("\x1B[31m","\x1B[39m"):String,green:e?E("\x1B[32m","\x1B[39m"):String,yellow:e?E("\x1B[33m","\x1B[39m"):String,blue:e?E("\x1B[34m","\x1B[39m"):String,magenta:e?E("\x1B[35m","\x1B[39m"):String,cyan:e?E("\x1B[36m","\x1B[39m"):String,white:e?E("\x1B[37m","\x1B[39m"):String,gray:e?E("\x1B[90m","\x1B[39m"):String,bgBlack:e?E("\x1B[40m","\x1B[49m"):String,bgRed:e?E("\x1B[41m","\x1B[49m"):String,bgGreen:e?E("\x1B[42m","\x1B[49m"):String,bgYellow:e?E("\x1B[43m","\x1B[49m"):String,bgBlue:e?E("\x1B[44m","\x1B[49m"):String,bgMagenta:e?E("\x1B[45m","\x1B[49m"):String,bgCyan:e?E("\x1B[46m","\x1B[49m"):String,bgWhite:e?E("\x1B[47m","\x1B[49m"):String});oi.exports=Ku(),m.createColors=Ku;function Di(e,t){if(e===t)return;const u=e.split(`
`),n=t.split(`
`),r=[];for(let o=0;o<Math.max(u.length,n.length);o++)u[o]!==n[o]&&r.push(o);return r}const zu=Symbol("clack:cancel");function xe(e){return e===zu}function Se(e,t){e.isTTY&&e.setRawMode(t)}const Yu=new Map([["k","up"],["j","down"],["h","left"],["l","right"]]),ai=new Set(["up","down","left","right","space","enter"]);class Vu{constructor({render:t,input:u=Lt,output:n=Gt,...r},o=!0){this._track=!1,this._cursor=0,this.state="initial",this.error="",this.subscribers=new Map,this._prevFrame="",this.opts=r,this.onKeypress=this.onKeypress.bind(this),this.close=this.close.bind(this),this.render=this.render.bind(this),this._render=t.bind(this),this._track=o,this.input=u,this.output=n}prompt(){const t=new Rn(0);return t._write=(u,n,r)=>{this._track&&(this.value=this.rl.line.replace(/\t/g,""),this._cursor=this.rl.cursor,this.emit("value",this.value)),r()},this.input.pipe(t),this.rl=Kt.createInterface({input:this.input,output:t,tabSize:2,prompt:"",escapeCodeTimeout:50}),Kt.emitKeypressEvents(this.input,this.rl),this.rl.prompt(),this.opts.initialValue!==void 0&&this._track&&this.rl.write(this.opts.initialValue),this.input.on("keypress",this.onKeypress),Se(this.input,!0),this.render(),new Promise((u,n)=>{this.once("submit",()=>{this.output.write(A.cursor.show),Se(this.input,!1),u(this.value)}),this.once("cancel",()=>{this.output.write(A.cursor.show),Se(this.input,!1),u(zu)})})}on(t,u){const n=this.subscribers.get(t)??[];n.push({cb:u}),this.subscribers.set(t,n)}once(t,u){const n=this.subscribers.get(t)??[];n.push({cb:u,once:!0}),this.subscribers.set(t,n)}emit(t,...u){const n=this.subscribers.get(t)??[],r=[];for(const o of n)o.cb(...u),o.once&&r.push(()=>n.splice(n.indexOf(o),1));for(const o of r)o()}unsubscribe(){this.subscribers.clear()}onKeypress(t,u){if(this.state==="error"&&(this.state="active"),u!=null&&u.name&&!this._track&&Yu.has(u.name)&&this.emit("cursor",Yu.get(u.name)),u!=null&&u.name&&ai.has(u.name)&&this.emit("cursor",u.name),t&&(t.toLowerCase()==="y"||t.toLowerCase()==="n")&&this.emit("confirm",t.toLowerCase()==="y"),t&&this.emit("key",t.toLowerCase()),(u==null?void 0:u.name)==="return"){if(this.opts.validate){const n=this.opts.validate(this.value);n&&(this.error=n,this.state="error",this.rl.write(this.value))}this.state!=="error"&&(this.state="submit")}t===""&&(this.state="cancel"),(this.state==="submit"||this.state==="cancel")&&this.emit("finalize"),this.render(),(this.state==="submit"||this.state==="cancel")&&this.close()}close(){this.input.unpipe(),this.input.removeListener("keypress",this.onKeypress),this.output.write(`
`),Se(this.input,!1),this.rl.close(),this.emit(`${this.state}`,this.value),this.unsubscribe()}restoreCursor(){const t=this._prevFrame.split(`
`).length-1;this.output.write(A.cursor.move(-999,t*-1))}render(){const t=this._render(this)??"";if(t!==this._prevFrame){if(this.state==="initial")this.output.write(A.cursor.hide);else{const u=Di(this._prevFrame,t);if(this.restoreCursor(),u&&(u==null?void 0:u.length)===1){const n=u[0];this.output.write(A.cursor.move(0,n)),this.output.write(A.erase.lines(1));const r=t.split(`
`);this.output.write(r[n]),this._prevFrame=t,this.output.write(A.cursor.move(0,r.length-n-1));return}else if(u&&(u==null?void 0:u.length)>1){const n=u[0];this.output.write(A.cursor.move(0,n)),this.output.write(A.erase.down());const r=t.split(`
`).slice(n);this.output.write(r.join(`
`)),this._prevFrame=t;return}this.output.write(A.erase.down())}this.output.write(t),this.state==="initial"&&(this.state="active"),this._prevFrame=t}}}class ci extends Vu{get cursor(){return this.value?0:1}get _value(){return this.cursor===0}constructor(t){super(t,!1),this.value=!!t.initialValue,this.on("value",()=>{this.value=this._value}),this.on("confirm",u=>{this.output.write(A.cursor.move(0,-1)),this.value=u,this.state="submit",this.close()}),this.on("cursor",()=>{this.value=!this.value})}}class li extends Vu{constructor(t){super(t,!1),this.cursor=0,this.options=t.options,this.cursor=this.options.findIndex(({value:u})=>u===t.initialValue),this.cursor===-1&&(this.cursor=0),this.changeValue(),this.on("cursor",u=>{switch(u){case"left":case"up":this.cursor=this.cursor===0?this.options.length-1:this.cursor-1;break;case"down":case"right":this.cursor=this.cursor===this.options.length-1?0:this.cursor+1;break}this.changeValue()})}get _value(){return this.options[this.cursor]}changeValue(){this.value=this._value.value}}function fi({input:e=Lt,output:t=Gt,overwrite:u=!0,hideCursor:n=!0}={}){const r=he.createInterface({input:e,output:t,prompt:"",tabSize:1});he.emitKeypressEvents(e,r),e.isTTY&&e.setRawMode(!0);const o=(s,{name:i})=>{if(String(s)===""&&process.exit(0),!u)return;let D=i==="return"?0:-1,l=i==="return"?-1:0;he.moveCursor(t,D,l,()=>{he.clearLine(t,1,()=>{e.once("keypress",o)})})};return n&&process.stdout.write(A.cursor.hide),e.once("keypress",o),()=>{e.off("keypress",o),n&&process.stdout.write(A.cursor.show),r.terminal=!1,r.close()}}function di(){return w.platform!=="win32"?w.env.TERM!=="linux":Boolean(w.env.CI)||Boolean(w.env.WT_SESSION)||Boolean(w.env.TERMINUS_SUBLIME)||w.env.ConEmuTask==="{cmd::Cmder}"||w.env.TERM_PROGRAM==="Terminus-Sublime"||w.env.TERM_PROGRAM==="vscode"||w.env.TERM==="xterm-256color"||w.env.TERM==="alacritty"||w.env.TERMINAL_EMULATOR==="JetBrains-JediTerm"}const ht=di(),k=(e,t)=>ht?e:t,pi=k("\u25C6","*"),mi=k("\u25A0","x"),hi=k("\u25B2","x"),Ju=k("\u25C7","o"),Ci=k("\u250C","T"),S=k("\u2502","|"),Ct=k("\u2514","\u2014"),Ft=k("\u25CF",">"),gt=k("\u25CB"," "),Xu=e=>{switch(e){case"initial":case"active":return m.cyan(pi);case"cancel":return m.red(mi);case"error":return m.yellow(hi);case"submit":return m.green(Ju)}},Zu=e=>{const t=e.active??"Yes",u=e.inactive??"No";return new ci({active:t,inactive:u,initialValue:e.initialValue??!0,render(){const n=`${m.gray(S)}
${Xu(this.state)}  ${e.message}
`,r=this.value?t:u;switch(this.state){case"submit":return`${n}${m.gray(S)}  ${m.dim(r)}`;case"cancel":return`${n}${m.gray(S)}  ${m.strikethrough(m.dim(r))}
${m.gray(S)}`;default:return`${n}${m.cyan(S)}  ${this.value?`${m.green(Ft)} ${t}`:`${m.dim(gt)} ${m.dim(t)}`} ${m.dim("/")} ${this.value?`${m.dim(gt)} ${m.dim(u)}`:`${m.green(Ft)} ${u}`}
${m.cyan(Ct)}
`}}}).prompt()},Qu=e=>{const t=(u,n)=>{const r=u.label??String(u.value);return n==="active"?`${m.green(Ft)} ${r} ${u.hint?m.dim(`(${u.hint})`):""}`:n==="selected"?`${m.dim(r)}`:n==="cancelled"?`${m.strikethrough(m.dim(r))}`:`${m.dim(gt)} ${m.dim(r)}`};return new li({options:e.options,initialValue:e.initialValue,render(){const u=`${m.gray(S)}
${Xu(this.state)}  ${e.message}
`;switch(this.state){case"submit":return`${u}${m.gray(S)}  ${t(this.options[this.cursor],"selected")}`;case"cancel":return`${u}${m.gray(S)}  ${t(this.options[this.cursor],"cancelled")}
${m.gray(S)}`;default:return`${u}${m.cyan(S)}  ${this.options.map((n,r)=>t(n,r===this.cursor?"active":"inactive")).join(`
${m.cyan(S)}  `)}
${m.cyan(Ct)}
`}}}).prompt()},Et=(e="")=>{process.stdout.write(`${m.gray(Ci)}  ${e}
`)},I=(e="")=>{process.stdout.write(`${m.gray(S)}
${m.gray(Ct)}  ${e}

`)},yt=ht?["\u25D2","\u25D0","\u25D3","\u25D1"]:["\u2022","o","O","0"],se=()=>{let e,t;const u=ht?80:120;return{start(n=""){n=n.replace(/\.?\.?\.$/,""),e=fi(),process.stdout.write(`${m.gray(S)}
${m.magenta("\u25CB")}  ${n}
`);let r=0,o=0;t=setInterval(()=>{let s=yt[r];process.stdout.write(A.cursor.move(-999,-1)),process.stdout.write(`${m.magenta(s)}  ${n}${Math.floor(o)>=1?".".repeat(Math.floor(o)).slice(0,3):""}   
`),r=r===yt.length-1?0:r+1,o=o===yt.length?0:o+.125},u)},stop(n=""){process.stdout.write(A.cursor.move(-999,-2)),process.stdout.write(A.erase.down(2)),clearInterval(t),process.stdout.write(`${m.gray(S)}
${m.green(Ju)}  ${n}
`),e()}}};class $ extends Error{}const wt="    ",X=e=>{e instanceof Error&&!(e instanceof $)&&(e.stack&&console.error(Ae(e.stack.split(`
`).slice(1).join(`
`))),console.error(`
${wt}${Ae(`aicommits v${pu}`)}`),console.error(`
${wt}Please open a Bug report with the information above:`),console.error(`${wt}https://github.com/Nutlope/aicommits/issues/new/choose`))},bt=async()=>{const{stdout:e,failed:t}=await G("git",["rev-parse","--show-toplevel"],{reject:!1});if(t)throw new $("The current directory must be a Git repository!");return e},ie=e=>`:(exclude)${e}`,Oe=["package-lock.json","pnpm-lock.yaml","*.lock"].map(ie),en=async e=>{const t=["diff","--cached","--diff-algorithm=minimal"],{stdout:u}=await G("git",[...t,"--name-only",...Oe,...e?e.map(ie):[]]);if(!u)return;const{stdout:n}=await G("git",[...t,...Oe,...e?e.map(ie):[]]);return{files:u.split(`
`),diff:n}},Fi=async(e,t,u)=>{const n=["diff",e,t,"--diff-algorithm=minimal"],{stdout:r}=await G("git",[...n,"--name-only",...Oe,...u?u.map(ie):[]]);if(!r)return;const o=r.split(`
`);let s=[];for(const i of o){let{diff:D}=await gi(e,t,i,u);s.push(D)}return{files:o,diff:s}},gi=async(e,t,u,n)=>{const r=["diff",`${e}..${t}`,"--diff-algorithm=minimal","--",u],{stdout:o}=await G("git",[...r,...Oe,...n?n.map(ie):[]]);return{diff:o}},tn=e=>`Detected ${e.length.toLocaleString()} staged file${e.length>1?"s":""}`,{hasOwnProperty:Bt}=Object.prototype,Pe=typeof process<"u"&&process.platform==="win32"?`\r
`:`
`,vt=(e,t)=>{const u=[];let n="";typeof t=="string"?t={section:t,whitespace:!1}:(t=t||Object.create(null),t.whitespace=t.whitespace===!0);const r=t.whitespace?" = ":"=";for(const o of Object.keys(e)){const s=e[o];if(s&&Array.isArray(s))for(const i of s)n+=Z(o+"[]")+r+Z(i)+Pe;else s&&typeof s=="object"?u.push(o):n+=Z(o)+r+Z(s)+Pe}t.section&&n.length&&(n="["+Z(t.section)+"]"+Pe+n);for(const o of u){const s=un(o).join("\\."),i=(t.section?t.section+".":"")+s,{whitespace:D}=t,l=vt(e[o],{section:i,whitespace:D});n.length&&l.length&&(n+=Pe),n+=l}return n},un=e=>e.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map(t=>t.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")),nn=e=>{const t=Object.create(null);let u=t,n=null;const r=/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i,o=e.split(/[\r\n]+/g);for(const i of o){if(!i||i.match(/^\s*[;#]/))continue;const D=i.match(r);if(!D)continue;if(D[1]!==void 0){if(n=Te(D[1]),n==="__proto__"){u=Object.create(null);continue}u=t[n]=t[n]||Object.create(null);continue}const l=Te(D[2]),f=l.length>2&&l.slice(-2)==="[]",a=f?l.slice(0,-2):l;if(a==="__proto__")continue;const c=D[3]?Te(D[4]):!0,d=c==="true"||c==="false"||c==="null"?JSON.parse(c):c;f&&(Bt.call(u,a)?Array.isArray(u[a])||(u[a]=[u[a]]):u[a]=[]),Array.isArray(u[a])?u[a].push(d):u[a]=d}const s=[];for(const i of Object.keys(t)){if(!Bt.call(t,i)||typeof t[i]!="object"||Array.isArray(t[i]))continue;const D=un(i);u=t;const l=D.pop(),f=l.replace(/\\\./g,".");for(const a of D)a!=="__proto__"&&((!Bt.call(u,a)||typeof u[a]!="object")&&(u[a]=Object.create(null)),u=u[a]);u===t&&f===l||(u[f]=t[i],s.push(i))}for(const i of s)delete t[i];return t},rn=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"),Z=e=>typeof e!="string"||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&rn(e)||e!==e.trim()?JSON.stringify(e):e.split(";").join("\\;").split("#").join("\\#"),Te=(e,t)=>{if(e=(e||"").trim(),rn(e)){e.charAt(0)==="'"&&(e=e.slice(1,-1));try{e=JSON.parse(e)}catch{}}else{let u=!1,n="";for(let r=0,o=e.length;r<o;r++){const s=e.charAt(r);if(u)"\\;#".indexOf(s)!==-1?n+=s:n+="\\"+s,u=!1;else{if(";#".indexOf(s)!==-1)break;s==="\\"?u=!0:n+=s}}return u&&(n+="\\"),n.trim()}return e};var on={parse:nn,decode:nn,stringify:vt,encode:vt,safe:Z,unsafe:Te};const sn=e=>O.lstat(e).then(()=>!0,()=>!1),Ei=["","conventional"],{hasOwnProperty:yi}=Object.prototype,Dn=(e,t)=>yi.call(e,t),P=(e,t,u)=>{if(!t)throw new $(`Invalid config property ${e}: ${u}`)},Ie={OPENAI_KEY(e){if(!e)throw new $("Please set your OpenAI API key via `aicommits config set OPENAI_KEY=<your token>`");return P("OPENAI_KEY",e.startsWith("sk-"),'Must start with "sk-"'),e},locale(e){return e?(P("locale",e,"Cannot be empty"),P("locale",/^[a-z-]+$/i.test(e),"Must be a valid locale (letters and dashes/underscores). You can consult the list of codes in: https://wikipedia.org/wiki/List_of_ISO_639-1_codes"),e):"en"},generate(e){if(!e)return 1;P("generate",/^\d+$/.test(e),"Must be an integer");const t=Number(e);return P("generate",t>0,"Must be greater than 0"),P("generate",t<=5,"Must be less or equal to 5"),t},type(e){return e?(P("type",Ei.includes(e),"Invalid commit type"),e):""},proxy(e){if(!(!e||e.length===0))return P("proxy",/^https?:\/\//.test(e),"Must be a valid URL"),e},model(e){return!e||e.length===0?"gpt-3.5-turbo":e},timeout(e){if(!e)return 1e4;P("timeout",/^\d+$/.test(e),"Must be an integer");const t=Number(e);return P("timeout",t>=500,"Must be greater than 500ms"),t},"max-length"(e){if(!e)return 50;P("max-length",/^\d+$/.test(e),"Must be an integer");const t=Number(e);return P("max-length",t>=20,"Must be greater than 20 characters"),t}},$t=q.join(zt.homedir(),".aicommits"),an=async()=>{if(!await sn($t))return Object.create(null);const t=await O.readFile($t,"utf8");return on.parse(t)},_e=async(e,t)=>{const u=await an(),n={};for(const r of Object.keys(Ie)){const o=Ie[r],s=(e==null?void 0:e[r])??u[r];if(t)try{n[r]=o(s)}catch{}else n[r]=o(s)}return n},wi=async e=>{const t=await an();for(const[u,n]of e){if(!Dn(Ie,u))throw new $(`Invalid config property: ${u}`);const r=Ie[u](n);t[u]=r}await O.writeFile($t,on.stringify(t),"utf8")};var At={},De={},bi={get exports(){return De},set exports(e){De=e}},ae={},Bi={get exports(){return ae},set exports(e){ae=e}},xt,cn;function vi(){if(cn)return xt;cn=1;var e=1e3,t=e*60,u=t*60,n=u*24,r=n*7,o=n*365.25;xt=function(f,a){a=a||{};var c=typeof f;if(c==="string"&&f.length>0)return s(f);if(c==="number"&&isFinite(f))return a.long?D(f):i(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function s(f){if(f=String(f),!(f.length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(a){var c=parseFloat(a[1]),d=(a[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*r;case"days":case"day":case"d":return c*n;case"hours":case"hour":case"hrs":case"hr":case"h":return c*u;case"minutes":case"minute":case"mins":case"min":case"m":return c*t;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}function i(f){var a=Math.abs(f);return a>=n?Math.round(f/n)+"d":a>=u?Math.round(f/u)+"h":a>=t?Math.round(f/t)+"m":a>=e?Math.round(f/e)+"s":f+"ms"}function D(f){var a=Math.abs(f);return a>=n?l(f,a,n,"day"):a>=u?l(f,a,u,"hour"):a>=t?l(f,a,t,"minute"):a>=e?l(f,a,e,"second"):f+" ms"}function l(f,a,c,d){var p=a>=c*1.5;return Math.round(f/c)+" "+d+(p?"s":"")}return xt}var St,ln;function fn(){if(ln)return St;ln=1;function e(t){n.debug=n,n.default=n,n.coerce=l,n.disable=s,n.enable=o,n.enabled=i,n.humanize=vi(),n.destroy=f,Object.keys(t).forEach(a=>{n[a]=t[a]}),n.names=[],n.skips=[],n.formatters={};function u(a){let c=0;for(let d=0;d<a.length;d++)c=(c<<5)-c+a.charCodeAt(d),c|=0;return n.colors[Math.abs(c)%n.colors.length]}n.selectColor=u;function n(a){let c,d=null,p,h;function C(...F){if(!C.enabled)return;const B=C,_=Number(new Date),pe=_-(c||_);B.diff=pe,B.prev=c,B.curr=_,c=_,F[0]=n.coerce(F[0]),typeof F[0]!="string"&&F.unshift("%O");let R=0;F[0]=F[0].replace(/%([a-zA-Z%])/g,(H,Sn)=>{if(H==="%%")return"%";R++;const Nt=n.formatters[Sn];if(typeof Nt=="function"){const On=F[R];H=Nt.call(B,On),F.splice(R,1),R--}return H}),n.formatArgs.call(B,F),(B.log||n.log).apply(B,F)}return C.namespace=a,C.useColors=n.useColors(),C.color=n.selectColor(a),C.extend=r,C.destroy=n.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(p!==n.namespaces&&(p=n.namespaces,h=n.enabled(a)),h),set:F=>{d=F}}),typeof n.init=="function"&&n.init(C),C}function r(a,c){const d=n(this.namespace+(typeof c>"u"?":":c)+a);return d.log=this.log,d}function o(a){n.save(a),n.namespaces=a,n.names=[],n.skips=[];let c;const d=(typeof a=="string"?a:"").split(/[\s,]+/),p=d.length;for(c=0;c<p;c++)d[c]&&(a=d[c].replace(/\*/g,".*?"),a[0]==="-"?n.skips.push(new RegExp("^"+a.slice(1)+"$")):n.names.push(new RegExp("^"+a+"$")))}function s(){const a=[...n.names.map(D),...n.skips.map(D).map(c=>"-"+c)].join(",");return n.enable(""),a}function i(a){if(a[a.length-1]==="*")return!0;let c,d;for(c=0,d=n.skips.length;c<d;c++)if(n.skips[c].test(a))return!1;for(c=0,d=n.names.length;c<d;c++)if(n.names[c].test(a))return!0;return!1}function D(a){return a.toString().substring(2,a.toString().length-2).replace(/\.\*\?$/,"*")}function l(a){return a instanceof Error?a.stack||a.message:a}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return St=e,St}var dn;function $i(){return dn||(dn=1,function(e,t){t.formatArgs=n,t.save=r,t.load=o,t.useColors=u,t.storage=s(),t.destroy=(()=>{let D=!1;return()=>{D||(D=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function u(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(D){if(D[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+D[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;D.splice(1,0,l,"color: inherit");let f=0,a=0;D[0].replace(/%[a-zA-Z%]/g,c=>{c!=="%%"&&(f++,c==="%c"&&(a=f))}),D.splice(a,0,l)}t.log=console.debug||console.log||(()=>{});function r(D){try{D?t.storage.setItem("debug",D):t.storage.removeItem("debug")}catch{}}function o(){let D;try{D=t.storage.getItem("debug")}catch{}return!D&&typeof process<"u"&&"env"in process&&(D=process.env.DEBUG),D}function s(){try{return localStorage}catch{}}e.exports=fn()(t);const{formatters:i}=e.exports;i.j=function(D){try{return JSON.stringify(D)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}(Bi,ae)),ae}var ce={},Ai={get exports(){return ce},set exports(e){ce=e}},Ot,pn;function xi(){return pn||(pn=1,Ot=(e,t=process.argv)=>{const u=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(u+e),r=t.indexOf("--");return n!==-1&&(r===-1||n<r)}),Ot}var Pt,mn;function Si(){if(mn)return Pt;mn=1;const e=zt,t=me,u=xi(),{env:n}=process;let r;u("no-color")||u("no-colors")||u("color=false")||u("color=never")?r=0:(u("color")||u("colors")||u("color=true")||u("color=always"))&&(r=1),"FORCE_COLOR"in n&&(n.FORCE_COLOR==="true"?r=1:n.FORCE_COLOR==="false"?r=0:r=n.FORCE_COLOR.length===0?1:Math.min(parseInt(n.FORCE_COLOR,10),3));function o(D){return D===0?!1:{level:D,hasBasic:!0,has256:D>=2,has16m:D>=3}}function s(D,l){if(r===0)return 0;if(u("color=16m")||u("color=full")||u("color=truecolor"))return 3;if(u("color=256"))return 2;if(D&&!l&&r===void 0)return 0;const f=r||0;if(n.TERM==="dumb")return f;if(process.platform==="win32"){const a=e.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in n)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(a=>a in n)||n.CI_NAME==="codeship"?1:f;if("TEAMCITY_VERSION"in n)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(n.TEAMCITY_VERSION)?1:0;if(n.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in n){const a=parseInt((n.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(n.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(n.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(n.TERM)||"COLORTERM"in n?1:f}function i(D){const l=s(D,D&&D.isTTY);return o(l)}return Pt={supportsColor:i,stdout:o(s(!0,t.isatty(1))),stderr:o(s(!0,t.isatty(2)))},Pt}var hn;function Oi(){return hn||(hn=1,function(e,t){const u=me,n=qt;t.init=f,t.log=i,t.formatArgs=o,t.save=D,t.load=l,t.useColors=r,t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const c=Si();c&&(c.stderr||c).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(c=>/^debug_/i.test(c)).reduce((c,d)=>{const p=d.substring(6).toLowerCase().replace(/_([a-z])/g,(C,F)=>F.toUpperCase());let h=process.env[d];return/^(yes|on|true|enabled)$/i.test(h)?h=!0:/^(no|off|false|disabled)$/i.test(h)?h=!1:h==="null"?h=null:h=Number(h),c[p]=h,c},{});function r(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):u.isatty(process.stderr.fd)}function o(c){const{namespace:d,useColors:p}=this;if(p){const h=this.color,C="\x1B[3"+(h<8?h:"8;5;"+h),F=`  ${C};1m${d} \x1B[0m`;c[0]=F+c[0].split(`
`).join(`
`+F),c.push(C+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else c[0]=s()+d+" "+c[0]}function s(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function i(...c){return process.stderr.write(n.format(...c)+`
`)}function D(c){c?process.env.DEBUG=c:delete process.env.DEBUG}function l(){return process.env.DEBUG}function f(c){c.inspectOpts={};const d=Object.keys(t.inspectOpts);for(let p=0;p<d.length;p++)c.inspectOpts[d[p]]=t.inspectOpts[d[p]]}e.exports=fn()(t);const{formatters:a}=e.exports;a.o=function(c){return this.inspectOpts.colors=this.useColors,n.inspect(c,this.inspectOpts).split(`
`).map(d=>d.trim()).join(" ")},a.O=function(c){return this.inspectOpts.colors=this.useColors,n.inspect(c,this.inspectOpts)}}(Ai,ce)),ce}(function(e){typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?e.exports=$i():e.exports=Oi()})(bi);var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});function Pi(e){return function(t,u){return new Promise((n,r)=>{e.call(this,t,u,(o,s)=>{o?r(o):n(s)})})}}Tt.default=Pi;var Cn=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const Ti=Wt,Ii=Cn(De),_i=Cn(Tt),le=Ii.default("agent-base");function ki(e){return Boolean(e)&&typeof e.addRequest=="function"}function It(){const{stack:e}=new Error;return typeof e!="string"?!1:e.split(`
`).some(t=>t.indexOf("(https.js:")!==-1||t.indexOf("node:https:")!==-1)}function ke(e,t){return new ke.Agent(e,t)}(function(e){class t extends Ti.EventEmitter{constructor(n,r){super();let o=r;typeof n=="function"?this.callback=n:n&&(o=n),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:It()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:It()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,r,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,r){const o=Object.assign({},r);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=It()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80),o.protocol==null&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,i=null;const D=o.timeout||this.timeout,l=d=>{n._hadError||(n.emit("error",d),n._hadError=!0)},f=()=>{i=null,s=!0;const d=new Error(`A "socket" was not created for HTTP request before ${D}ms`);d.code="ETIMEOUT",l(d)},a=d=>{s||(i!==null&&(clearTimeout(i),i=null),l(d))},c=d=>{if(s)return;if(i!=null&&(clearTimeout(i),i=null),ki(d)){le("Callback returned another Agent instance %o",d.constructor.name),d.addRequest(n,o);return}if(d){d.once("free",()=>{this.freeSocket(d,o)}),n.onSocket(d);return}const p=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);l(p)};if(typeof this.callback!="function"){l(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(le("Converting legacy callback function to promise"),this.promisifiedCallback=_i.default(this.callback)):this.promisifiedCallback=this.callback),typeof D=="number"&&D>0&&(i=setTimeout(f,D)),"port"in o&&typeof o.port!="number"&&(o.port=Number(o.port));try{le("Resolving socket for %o request: %o",o.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,o)).then(c,a)}catch(d){Promise.reject(d).catch(a)}}freeSocket(n,r){le("Freeing socket %o %o",n.constructor.name,r),n.destroy()}destroy(){le("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype})(ke||(ke={}));var Ri=ke,_t={},Mi=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_t,"__esModule",{value:!0});const Ni=Mi(De),fe=Ni.default("https-proxy-agent:parse-proxy-response");function ji(e){return new Promise((t,u)=>{let n=0;const r=[];function o(){const a=e.read();a?f(a):e.once("readable",o)}function s(){e.removeListener("end",D),e.removeListener("error",l),e.removeListener("close",i),e.removeListener("readable",o)}function i(a){fe("onclose had error %o",a)}function D(){fe("onend")}function l(a){s(),fe("onerror %o",a),u(a)}function f(a){r.push(a),n+=a.length;const c=Buffer.concat(r,n);if(c.indexOf(`\r
\r
`)===-1){fe("have not received end of HTTP headers yet..."),o();return}const p=c.toString("ascii",0,c.indexOf(`\r
`)),h=+p.split(" ")[1];fe("got proxy server response: %o",p),t({statusCode:h,buffered:c})}e.on("error",l),e.on("close",i),e.on("end",D),o()})}_t.default=ji;var Li=b&&b.__awaiter||function(e,t,u,n){function r(o){return o instanceof u?o:new u(function(s){s(o)})}return new(u||(u=Promise))(function(o,s){function i(f){try{l(n.next(f))}catch(a){s(a)}}function D(f){try{l(n.throw(f))}catch(a){s(a)}}function l(f){f.done?o(f.value):r(f.value).then(i,D)}l((n=n.apply(e,t||[])).next())})},Q=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(At,"__esModule",{value:!0});const Fn=Q(Nn),gn=Q(jn),Gi=Q(Ln),Ui=Q(Ht),Hi=Q(De),Wi=Ri,qi=Q(_t),de=Hi.default("https-proxy-agent:agent");class Ki extends Wi.Agent{constructor(t){let u;if(typeof t=="string"?u=Gi.default.parse(t):u=t,!u)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");de("creating new HttpsProxyAgent instance: %o",u),super(u);const n=Object.assign({},u);this.secureProxy=u.secureProxy||Vi(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(t,u){return Li(this,void 0,void 0,function*(){const{proxy:n,secureProxy:r}=this;let o;r?(de("Creating `tls.Socket`: %o",n),o=gn.default.connect(n)):(de("Creating `net.Socket`: %o",n),o=Fn.default.connect(n));const s=Object.assign({},n.headers);let D=`CONNECT ${`${u.host}:${u.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:l,port:f,secureEndpoint:a}=u;Yi(f,a)||(l+=`:${f}`),s.Host=l,s.Connection="close";for(const C of Object.keys(s))D+=`${C}: ${s[C]}\r
`;const c=qi.default(o);o.write(`${D}\r
`);const{statusCode:d,buffered:p}=yield c;if(d===200){if(t.once("socket",zi),u.secureEndpoint){de("Upgrading socket connection to TLS");const C=u.servername||u.host;return gn.default.connect(Object.assign(Object.assign({},Ji(u,"host","hostname","path","port")),{socket:o,servername:C}))}return o}o.destroy();const h=new Fn.default.Socket({writable:!1});return h.readable=!0,t.once("socket",C=>{de("replaying proxy buffer for failed request"),Ui.default(C.listenerCount("data")>0),C.push(p),C.push(null)}),h})}}At.default=Ki;function zi(e){e.resume()}function Yi(e,t){return Boolean(!t&&e===80||t&&e===443)}function Vi(e){return typeof e=="string"?/^https:?$/i.test(e):!1}function Ji(e,...t){const u={};let n;for(n in e)t.includes(n)||(u[n]=e[n]);return u}var Xi=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const kt=Xi(At);function Rt(e){return new kt.default(e)}(function(e){e.HttpsProxyAgent=kt.default,e.prototype=kt.default.prototype})(Rt||(Rt={}));var Zi=Rt;const Qi={"":"<commit message>",conventional:"<type>(<optional scope>): <commit message>"},eD=e=>`The output response must be in format:
${Qi[e]}`,tD={"":"",conventional:`Choose a type from the type-to-description JSON below that best describes the git diff:
${JSON.stringify({docs:"Documentation only changes",style:"Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)",refactor:"A code change that neither fixes a bug nor adds a feature",perf:"A code change that improves performance",test:"Adding missing tests or correcting existing tests",build:"Changes that affect the build system or external dependencies",ci:"Changes to our CI configuration files and scripts",chore:"Other changes that don't modify src or test files",revert:"Reverts a previous commit",feat:"A new feature",fix:"A bug fix"},null,2)}`},uD=(e,t,u)=>["Generate a concise git commit message written in present tense for the following code diff with the given specifications below:",`Message language: ${e}`,`Commit message must be a maximum of ${t} characters.`,"Exclude anything unnecessary such as translation. Your entire response will be passed directly into git commit.",tD[u],eD(u)].filter(Boolean).join(`
`),nD=e=>["Generate a detailed and technical git code review message for the following code diff with the given specifications below:",`Message language: ${e}`,"Exclude anything unnecessary, such as translations. Your entire response will be part of the code analysis and review. Include a code analysis, a linter check, and a spelling check; if you find errors, redundancies, syntax errors, or typos, include them in the analysis. If findings are identified during the analysis, provide the relevant recommendations."].filter(Boolean).join(`
`),rD=async(e,t,u,n,r,o)=>new Promise((s,i)=>{const D=JSON.stringify(n),l=Mn.request({port:443,hostname:e,path:t,method:"POST",headers:{...u,"Content-Type":"application/json","Content-Length":Buffer.byteLength(D)},timeout:r,agent:o?Zi(o):void 0},f=>{const a=[];f.on("data",c=>a.push(c)),f.on("end",()=>{s({request:l,response:f,data:Buffer.concat(a).toString()})})});l.on("error",i),l.on("timeout",()=>{l.destroy(),i(new $(`Time out error: request took over ${r}ms. Try increasing the \`timeout\` config, or checking the OpenAI API status https://status.openai.com`))}),l.write(D),l.end()}),En=async(e,t,u,n)=>{console.log("post, /v1/chat/completions");const{response:r,data:o}=await rD("api.openai.com","/v1/chat/completions",{Authorization:`Bearer ${e}`},t,u,n);if(!r.statusCode||r.statusCode<200||r.statusCode>299){let s=`OpenAI API Error: ${r.statusCode} - ${r.statusMessage}`;throw o&&(s+=`

${o}`),r.statusCode===500&&(s+=`

Check the API status: https://status.openai.com`),new $(s)}return JSON.parse(o)},yn=e=>e.trim().replace(/[\n\r]/g,"").replace(/(\w)\.$/,"$1"),wn=e=>Array.from(new Set(e)),bn=async(e,t,u,n,r,o,s,i,D)=>{try{const l=await En(e,{model:t,messages:[{role:"system",content:uD(u,o,s)},{role:"user",content:n}],temperature:.7,top_p:1,frequency_penalty:0,presence_penalty:0,max_tokens:200,stream:!1,n:r},i,D);return wn(l.choices.filter(f=>{var a;return(a=f.message)==null?void 0:a.content}).map(f=>yn(f.message.content)))}catch(l){const f=l;throw f.code==="ENOTFOUND"?new $(`Error connecting to ${f.hostname} (${f.syscall}). Are you connected to the internet?`):f}},oD=async(e,t,u,n,r,o,s,i,D)=>{let l=[];for(const f of n)try{const a=await En(e,{model:t,messages:[{role:"system",content:nD(u)},{role:"user",content:f}],temperature:.7,top_p:1,frequency_penalty:0,presence_penalty:0,max_tokens:200,stream:!1,n:r},i,D);l.push(wn(a.choices.filter(c=>{var d;return(d=c.message)==null?void 0:d.content}).map(c=>yn(c.message.content))))}catch(a){const c=a;throw c.code==="ENOTFOUND"?new $(`Error connecting to ${c.hostname} (${c.syscall}). Are you connected to the internet?`):c}return[l.join("/n ")]};var sD=async(e,t,u,n,r)=>(async()=>{Et(dt(ft(" aicommits "))),await bt();const o=se();u&&await G("git",["add","--update"]),o.start("Detecting staged files");const s=await en(t);if(!s)throw o.stop("Detecting staged files"),new $("No staged changes found. Stage your changes manually, or automatically stage all changes with the `--all` flag.");o.stop(`${tn(s.files)}:
${s.files.map(c=>`     ${c}`).join(`
`)}`);const{env:i}=process,D=await _e({OPENAI_KEY:i.OPENAI_KEY||i.OPENAI_API_KEY,proxy:i.https_proxy||i.HTTPS_PROXY||i.http_proxy||i.HTTP_PROXY,generate:e==null?void 0:e.toString(),type:n==null?void 0:n.toString()}),l=se();l.start("The AI is analyzing your changes");let f;try{f=await bn(D.OPENAI_KEY,D.model,D.locale,s.diff,D.generate,D["max-length"],D.type,D.timeout,D.proxy)}finally{l.stop("Changes analyzed")}if(f.length===0)throw new $("No commit messages were generated. Try again.");let a;if(f.length===1){[a]=f;const c=await Zu({message:`Use this commit message?

   ${a}
`});if(!c||xe(c)){I("Commit cancelled");return}}else{const c=await Qu({message:`Pick a commit message to use: ${Ae("(Ctrl+c to exit)")}`,options:f.map(d=>({label:d,value:d}))});if(xe(c)){I("Commit cancelled");return}a=c}await G("git",["commit","-m",a,...r]),I(`${oe("\u2714")} Successfully committed!`)})().catch(o=>{I(`${J("\u2716")} ${o.message}`),X(o),process.exit(1)});const[Mt,iD]=process.argv.slice(2);var DD=()=>(async()=>{if(!Mt)throw new $('Commit message file path is missing. This file should be called from the "prepare-commit-msg" git hook');if(iD)return;const e=await en();if(!e)return;Et(dt(ft(" aicommits ")));const{env:t}=process,u=await _e({proxy:t.https_proxy||t.HTTPS_PROXY||t.http_proxy||t.HTTP_PROXY}),n=se();n.start("The AI is analyzing your changes");let r;try{r=await bn(u.OPENAI_KEY,u.model,u.locale,e.diff,u.generate,u["max-length"],u.type,u.timeout,u.proxy)}finally{n.stop("Changes analyzed")}const s=await O.readFile(Mt,"utf8")!=="",i=r.length>1;let D="";s&&(D=`# \u{1F916} AI generated commit${i?"s":""}
`),i?(s&&(D+=`# Select one of the following messages by uncommeting:
`),D+=`
${r.map(l=>`# ${l}`).join(`
`)}`):(s&&(D+=`# Edit the message below and commit:
`),D+=`
${r[0]}
`),await O.appendFile(Mt,D),I(`${oe("\u2714")} Saved commit message!`)})().catch(e=>{I(`${J("\u2716")} ${e.message}`),X(e),process.exit(1)}),aD=Ye({name:"config",parameters:["<mode>","<key=value...>"]},e=>{(async()=>{const{mode:t,keyValue:u}=e._;if(t==="get"){const n=await _e({},!0);for(const r of u)Dn(n,r)&&console.log(`${r}=${n[r]}`);return}if(t==="set"){await wi(u.map(n=>n.split("=")));return}throw new $(`Invalid mode: ${t}`)})().catch(t=>{console.error(`${J("\u2716")} ${t.message}`),X(t),process.exit(1)})});const Bn="prepare-commit-msg",vn=`.git/hooks/${Bn}`,Re=Gn(new URL("cli.mjs",import.meta.url)),cD=process.argv[1].replace(/\\/g,"/").endsWith(`/${vn}`),$n=process.platform==="win32",An=`
#!/usr/bin/env node
import(${JSON.stringify(Un(Re))})
`.trim();var lD=Ye({name:"hook",parameters:["<install/uninstall>"]},e=>{(async()=>{const t=await bt(),{installUninstall:u}=e._,n=q.join(t,vn),r=await sn(n);if(u==="install"){if(r){if(await O.realpath(n).catch(()=>{})===Re){console.warn("The hook is already installed");return}throw new $(`A different ${Bn} hook seems to be installed. Please remove it before installing aicommits.`)}await O.mkdir(q.dirname(n),{recursive:!0}),$n?await O.writeFile(n,An):(await O.symlink(Re,n,"file"),await O.chmod(n,493)),console.log(`${oe("\u2714")} Hook installed`);return}if(u==="uninstall"){if(!r){console.warn("Hook is not installed");return}if($n){if(await O.readFile(n,"utf8")!==An){console.warn("Hook is not installed");return}}else if(await O.realpath(n)!==Re){console.warn("Hook is not installed");return}await O.rm(n),console.log(`${oe("\u2714")} Hook uninstalled`);return}throw new $(`Invalid mode: ${u}`)})().catch(t=>{console.error(`${J("\u2716")} ${t.message}`),X(t),process.exit(1)})}),fD=async(e,t,u,n)=>(async()=>{Et(dt(ft(" makecodereview "))),await bt();const r=se();r.start("Detecting staged files");const o=await Fi(t,u,n);if(!o)throw r.stop("Detecting staged files"),new $("No staged changes found. Stage your changes manually, or automatically stage all changes with the `--all` flag.");r.stop(`${tn(o.files)}:
${o.files.map(a=>`     ${a}`).join(`
`)}`);const{env:s}=process,i=await _e({OPENAI_KEY:s.OPENAI_KEY||s.OPENAI_API_KEY,proxy:s.https_proxy||s.HTTPS_PROXY||s.http_proxy||s.HTTP_PROXY,generate:e==null?void 0:e.toString(),type:void 0}),D=se();D.start("The AI is analyzing your changes");let l;try{l=await oD(i.OPENAI_KEY,i.model,i.locale,o.diff,i.generate,i["max-length"],i.type,i.timeout,i.proxy)}finally{D.stop("Changes analyzed")}if(l.length===0)throw new $("No commit messages were generated. Try again.");let f;if(l.length===1){[f]=l;const a=await Zu({message:`Use this code review message?

   ${f}
`});if(!a||xe(a)){I("Code Review cancelled");return}}else{const a=await Qu({message:`Pick a review message to use: ${Ae("(Ctrl+c to exit)")}`,options:l.map(c=>({label:c,value:c}))});if(xe(a)){I("Code Review cancelled");return}f=a}I(`${oe("\u2714")} Successfully reviewed!`)})().catch(r=>{I(`${J("\u2716")} ${r.message}`),X(r),process.exit(1)});process.argv.slice(2);var dD=Ye({name:"makecodereview",parameters:["<frombranch>","<tobranch>"],flags:{generate:{type:Number,description:"Number of messages to generate (Warning: generating multiple costs more) (default: 1)",alias:"g"},exclude:{type:[String],description:"Files to exclude from AI analysis",alias:"x"},all:{type:Boolean,description:"Automatically stage changes in tracked files for the commit",alias:"a",default:!1},type:{type:String,description:"Type of commit message to generate",alias:"t"}}},e=>{(async()=>{const{frombranch:t,tobranch:u}=e._;fD(e.flags.generate,t,u,e.flags.exclude)})().catch(t=>{console.error(`${J("\u2716")} ${t.message}`),X(t),process.exit(1)})});const xn=process.argv.slice(2);io({name:"aicommits",version:pu,flags:{generate:{type:Number,description:"Number of messages to generate (Warning: generating multiple costs more) (default: 1)",alias:"g"},exclude:{type:[String],description:"Files to exclude from AI analysis",alias:"x"},all:{type:Boolean,description:"Automatically stage changes in tracked files for the commit",alias:"a",default:!1},type:{type:String,description:"Type of commit message to generate",alias:"t"}},commands:[aD,lD,dD],help:{description:Do},ignoreArgv:e=>e==="unknown-flag"||e==="argument"},e=>{cD?DD():sD(e.flags.generate,e.flags.exclude,e.flags.all,e.flags.type,xn)},xn);
